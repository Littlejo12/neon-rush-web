<!doctype html>
<html lang="de">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Neon Rush (Web)</title>

  <link rel="manifest" href="manifest.webmanifest">
  <link rel="stylesheet" href="style.css" />

  <!-- AdSense (ECHT) – setze deine Publisher-ID -->
  <!-- Du brauchst einen AdSense Account + Freigabe. -->
  <script async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXX"
    crossorigin="anonymous"></script>
</head>
<body>
  <header class="topbar">
    <div class="pill" id="score">Score: 0</div>
    <div class="pill" id="wallet">Coins: 0 • Gems: 0</div>
  </header>

  <main class="wrap">
    <canvas id="game" width="390" height="720"></canvas>

    <!-- MAIN MENU -->
    <section id="menu" class="panel">
      <h1 class="title">Neon Rush</h1>
      <p class="sub">5 Spuren • Swipe / Tippe • Upgrades • Online-Leaderboard</p>

      <div class="grid2">
        <button id="btnPlay" class="primary big">Play</button>
        <button id="btnPause" class="big" disabled>Pause</button>
        <button id="btnShop" class="big">Shop</button>
        <button id="btnSettings" class="big">Settings</button>
      </div>

      <div class="row">
        <div class="badge" id="noAdsBadge">Ads: On</div>
        <div class="badge" id="skinBadge">Skin: Classic</div>
      </div>

      <div class="row">
        <button id="btnLeaderboard" class="big">Leaderboard</button>
        <button id="btnNickname" class="big">Name setzen</button>
      </div>
      <p class="tiny muted">Online-Features laufen über Worker: <span id="workerStatus">checking…</span></p>
    </section>

    <!-- SHOP -->
    <section id="shop" class="panel hidden">
      <div class="panelHeader">
        <h2>Shop</h2>
        <button id="btnCloseShop">✕</button>
      </div>

      <p class="sub">Käufe: Skins, No Ads, Upgrades & echte Gems via Stripe.</p>

      <h3 class="h3">Upgrades (Coins)</h3>
      <div class="cards">
        <button class="card" data-upgrade="handling">
          <b>Handling</b>
          <span>Schnellerer Spurwechsel</span>
          <i id="price_handling">…</i>
        </button>
        <button class="card" data-upgrade="magnet">
          <b>Magnet</b>
          <span>Sammelt Coins aus Nähe</span>
          <i id="price_magnet">…</i>
        </button>
        <button class="card" data-upgrade="boost">
          <b>Boost</b>
          <span>Turbo mit Cooldown</span>
          <i id="price_boost">…</i>
        </button>
      </div>

      <h3 class="h3">Premium (Gems)</h3>
      <div class="cards">
        <button class="card" data-buy="noads">
          <b>No Ads</b>
          <span>Blendet Werbung aus</span>
          <i>150 Gems</i>
        </button>
        <button class="card" data-buy="skin_neon">
          <b>Car Skin: Neon</b>
          <span>Neues Aussehen</span>
          <i>80 Gems</i>
        </button>
        <button class="card" data-buy="skin_stealth">
          <b>Car Skin: Stealth</b>
          <span>Neues Aussehen</span>
          <i>80 Gems</i>
        </button>
      </div>

      <h3 class="h3">Echte Gems kaufen (Stripe)</h3>
      <div class="cards">
        <button class="card" data-stripe="gems_200">
          <b>200 Gems</b><span>Checkout (echte Zahlung)</span><i>€ 2,99</i>
        </button>
        <button class="card" data-stripe="gems_800">
          <b>800 Gems</b><span>Checkout (echte Zahlung)</span><i>€ 9,99</i>
        </button>
      </div>

      <div class="row">
        <button id="btnClaimDaily" class="primary">Daily Reward</button>
        <button id="btnResetSave">Reset Save</button>
      </div>
    </section>

    <!-- LEADERBOARD -->
    <section id="leaderboard" class="panel hidden">
      <div class="panelHeader">
        <h2>Leaderboard</h2>
        <button id="btnCloseLeaderboard">✕</button>
      </div>

      <div class="tabs">
        <button class="tab active" id="tabLocal">Lokal</button>
        <button class="tab" id="tabOnline">Online</button>
      </div>

      <div id="lbLocal" class="lbBox"></div>
      <div id="lbOnline" class="lbBox hidden"></div>

      <button id="btnRefreshOnline" class="primary">Online aktualisieren</button>
      <p class="tiny muted">Online benötigt Cloudflare Worker + D1.</p>
    </section>

    <!-- SETTINGS -->
    <section id="settings" class="panel hidden">
      <div class="panelHeader">
        <h2>Settings</h2>
        <button id="btnCloseSettings">✕</button>
      </div>

      <div class="setting">
        <label>Music Volume <span id="musicVal" class="muted"></span></label>
        <input id="musicVol" type="range" min="0" max="100" value="60">
      </div>

      <div class="setting">
        <label>SFX Volume <span id="sfxVal" class="muted"></span></label>
        <input id="sfxVol" type="range" min="0" max="100" value="70">
      </div>

      <div class="settingRow">
        <label class="toggle">
          <input id="toggleVibrate" type="checkbox">
          <span>Vibration (wenn verfügbar)</span>
        </label>
      </div>

      <div class="settingRow">
        <label class="toggle">
          <input id="toggleParticles" type="checkbox" checked>
          <span>Particles</span>
        </label>
      </div>

      <button id="btnBackFromSettings" class="primary">Zurück</button>
    </section>

    <!-- GAME OVER -->
    <section id="overlay" class="panel hidden">
      <h2>Game Over</h2>
      <p id="overText"></p>
      <div class="row">
        <button id="btnRetry" class="primary">Nochmal</button>
        <button id="btnContinue">Revive (10 Gems)</button>
      </div>
      <p class="tiny muted">Nach Run wird dein Score online gesendet (wenn Worker aktiv).</p>
    </section>

    <!-- Ads Container (ECHT) -->
    <footer class="adbar" id="adbar">
      <!-- AdSense Ad Unit: setze data-ad-slot -->
      <ins class="adsbygoogle"
        style="display:block"
        data-ad-client="ca-pub-XXXXXXXXXXXXXXX"
        data-ad-slot="1234567890"
        data-ad-format="auto"
        data-full-width-responsive="true"></ins>
      <script>(adsbygoogle = window.adsbygoogle || []).push({});</script>
      <small class="tiny muted">Wenn No Ads aktiv ist, wird das ausgeblendet.</small>
    </footer>
  </main>

  <script src="game.js"></script>
</body>
</html>
